document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".effectiveDate").forEach(input => {
        input.addEventListener("change", function () {
            const expDateInput = this.closest(".coverage-row").querySelector(".expirationDate");
            let effectiveDate = new Date(this.value);
            
            if (!isNaN(effectiveDate.getTime())) {
                // Set Expiration Date exactly 1 year ahead (same day and month)
                let newYear = effectiveDate.getFullYear() + 1;
                let expirationDate = new Date(effectiveDate);
                expirationDate.setFullYear(newYear);

                // Format date as YYYY-MM-DD
                expDateInput.value = expirationDate.toISOString().split("T")[0];
            }
        });
    });

    document.getElementById("calculateBtn").addEventListener("click", calculateProRatedAmounts);
});
